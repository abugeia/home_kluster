# Configuration GitOps pour le chart Altinity Clickhouse v0.3.8
# Ce chart gère l'installation de l'opérateur et du cluster via des paramètres plats.

operator:
  enabled: true
  # L'opérateur sera installé dans le namespace de destination (data) fixé par ArgoCD.

clickhouse:
  # Nombre de réplicas pour le cluster Clickhouse
  replicasCount: 1
  
  # Configuration de l'image (utilisant ECR pour éviter les quotas Docker Hub)
  image:
    repository: public.ecr.aws/altinity/clickhouse-server
    tag: "23.8.9.54-altinity"

  # Configuration de la persistence
  persistence:
    enabled: true
    size: 20Gi
    storageClass: "nfs-csi-nvme"
    accessMode: ReadWriteOnce
    logs:
      enabled: true
      size: 5Gi
      storageClass: "nfs-csi-nvme"
      accessMode: ReadWriteOnce

  # Paramètres de configuration Clickhouse (format dictionnaire)
  settings:
    logger/level: "information"
    max_connections: 1024
    
  # Identifiants par défaut (Admin)
  defaultUser:
    password: "admin"

  # Pour éviter les ComparisonError dans ArgoCD, on ne définit pas extraContainers/Volumes
  # s'ils ne sont pas nécessaires. Le chart utilisera ses défauts [].
